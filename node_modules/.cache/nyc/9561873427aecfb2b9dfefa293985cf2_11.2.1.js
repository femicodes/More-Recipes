'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _user = require('../controller/user');

var _recipe = require('../controller/recipe');

var _review = require('../controller/review');

var _votes = require('../controller/votes');

var _favorite = require('../controller/favorite');

var _validate = require('../middleware/validate');

var _authorize = require('../middleware/authorize');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var router = _express2.default.Router();

router.get('/', function (req, res) {
	res.status(200).json({ success: true, message: 'Welcome to More Recipes' });
});

// signup
router.post('/users/signup', _user.createUser);

// signin
router.post('/users/signin', _validate.checkUsernameExist, _user.loginUser);

// create recipes
router.post('/recipes', _authorize.verifyUserSession, _recipe.createRecipe);

// modify recipes 
router.put('/recipes/:recipeId', _authorize.verifyUserSession, _validate.checkRecipeExist, _recipe.modifyRecipe);

//delete recipes
router.delete('/recipes/:recipeId', _authorize.verifyUserSession, _validate.checkRecipeExist, _recipe.deleteRecipe);

// get recipes
router.get('/recipes', _authorize.verifyUserSession, _recipe.getRecipes);

// get single recipe
router.get('/recipes/:recipeId', _authorize.verifyUserSession, _validate.checkRecipeExist, _recipe.getRecipe);

// post review for a recipe 
router.post('/recipes/:recipeId/review', _authorize.verifyUserSession, _validate.checkRecipeExist, _review.postReview);

// get reviews of a recipe;
router.get('/recipes/:recipeId/reviews', _authorize.verifyUserSession, _validate.checkRecipeExist, _review.getReviews);

// get all favourites
router.get('/users/:userId/favorites', _authorize.verifyUserSession, _validate.checkUserExist, _favorite.getUserFavorites);

router.get('/users/:userId/recipes', _authorize.verifyUserSession, _validate.checkUserExist, _user.getUserRecipes);

// favourite a recipe
router.post('/recipes/:recipeId/favorite', _authorize.verifyUserSession, _validate.checkRecipeExist, _favorite.favoriteRecipe);

// upvote or downvote 
router.post('/recipes/:recipeId/vote-:voteType', _authorize.verifyUserSession, _validate.checkRecipeExist, _votes.voteRecipe, _votes.countVote);

// get recipes with the most upvotes 
// router.get('/recipes?sort=upvotes&order=ascending', verifyUserSession);


exports.default = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJwb3N0IiwicHV0IiwiZGVsZXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsSUFBTUEsU0FBUyxrQkFBUUMsTUFBUixFQUFmOztBQUVBRCxPQUFPRSxHQUFQLENBQVcsR0FBWCxFQUFnQixVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUM3QkEsS0FBSUMsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLEVBQUNDLFNBQVMsSUFBVixFQUFnQkMsU0FBUyx5QkFBekIsRUFBckI7QUFDQSxDQUZEOztBQUlBO0FBQ0FSLE9BQU9TLElBQVAsQ0FBWSxlQUFaOztBQUVBO0FBQ0FULE9BQU9TLElBQVAsQ0FBWSxlQUFaOztBQUVBO0FBQ0FULE9BQU9TLElBQVAsQ0FBWSxVQUFaOztBQUVBO0FBQ0FULE9BQU9VLEdBQVAsQ0FBVyxvQkFBWDs7QUFFQTtBQUNBVixPQUFPVyxNQUFQLENBQWMsb0JBQWQ7O0FBRUE7QUFDQVgsT0FBT0UsR0FBUCxDQUFXLFVBQVg7O0FBRUE7QUFDQUYsT0FBT0UsR0FBUCxDQUFXLG9CQUFYOztBQUVBO0FBQ0FGLE9BQU9TLElBQVAsQ0FBWSwyQkFBWjs7QUFFQTtBQUNBVCxPQUFPRSxHQUFQLENBQVcsNEJBQVg7O0FBRUE7QUFDQUYsT0FBT0UsR0FBUCxDQUFXLDBCQUFYOztBQUVBRixPQUFPRSxHQUFQLENBQVcsd0JBQVg7O0FBRUE7QUFDQUYsT0FBT1MsSUFBUCxDQUFZLDZCQUFaOztBQUVBO0FBQ0FULE9BQU9TLElBQVAsQ0FBWSxtQ0FBWjs7QUFFQTtBQUNBOzs7a0JBR2VULE0iLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6IkM6L1VzZXJzL1RvYmkvTW9yZS1SZWNpcGVzL3NlcnZlci9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuXHJcbmltcG9ydCB7IGNyZWF0ZVVzZXIsIGxvZ2luVXNlciwgZ2V0VXNlclJlY2lwZXN9IGZyb20gJy4uL2NvbnRyb2xsZXIvdXNlcic7XHJcbmltcG9ydCB7Y3JlYXRlUmVjaXBlLCBnZXRSZWNpcGVzLCBnZXRSZWNpcGUsIGRlbGV0ZVJlY2lwZSwgbW9kaWZ5UmVjaXBlfSBmcm9tICcuLi9jb250cm9sbGVyL3JlY2lwZSc7XHJcbmltcG9ydCB7IHBvc3RSZXZpZXcsIGdldFJldmlld3MgfSBmcm9tICcuLi9jb250cm9sbGVyL3Jldmlldyc7XHJcbmltcG9ydCB7IHZvdGVSZWNpcGUsIGNvdW50Vm90ZSB9IGZyb20gJy4uL2NvbnRyb2xsZXIvdm90ZXMnO1xyXG5pbXBvcnQgeyBmYXZvcml0ZVJlY2lwZSwgZ2V0VXNlckZhdm9yaXRlcyB9IGZyb20gJy4uL2NvbnRyb2xsZXIvZmF2b3JpdGUnO1xyXG5pbXBvcnQgeyBjaGVja1VzZXJuYW1lRXhpc3QsIGNoZWNrUmVjaXBlRXhpc3QsIGNoZWNrVXNlckV4aXN0fSBmcm9tICcuLi9taWRkbGV3YXJlL3ZhbGlkYXRlJztcclxuaW1wb3J0IHsgdmVyaWZ5VXNlclNlc3Npb24gfSBmcm9tICcuLi9taWRkbGV3YXJlL2F1dGhvcml6ZSc7XHRcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XHJcblx0cmVzLnN0YXR1cygyMDApLmpzb24oe3N1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdXZWxjb21lIHRvIE1vcmUgUmVjaXBlcyd9KTtcclxufSk7XHJcblxyXG4vLyBzaWdudXBcclxucm91dGVyLnBvc3QoJy91c2Vycy9zaWdudXAnLCBjcmVhdGVVc2VyKTtcclxuXHJcbi8vIHNpZ25pblxyXG5yb3V0ZXIucG9zdCgnL3VzZXJzL3NpZ25pbicsIGNoZWNrVXNlcm5hbWVFeGlzdCwgbG9naW5Vc2VyKTtcclxuXHJcbi8vIGNyZWF0ZSByZWNpcGVzXHJcbnJvdXRlci5wb3N0KCcvcmVjaXBlcycsIHZlcmlmeVVzZXJTZXNzaW9uLCBjcmVhdGVSZWNpcGUpO1xyXG5cclxuLy8gbW9kaWZ5IHJlY2lwZXMgXHJcbnJvdXRlci5wdXQoJy9yZWNpcGVzLzpyZWNpcGVJZCcsIHZlcmlmeVVzZXJTZXNzaW9uLCBjaGVja1JlY2lwZUV4aXN0LCBtb2RpZnlSZWNpcGUpO1xyXG5cclxuLy9kZWxldGUgcmVjaXBlc1xyXG5yb3V0ZXIuZGVsZXRlKCcvcmVjaXBlcy86cmVjaXBlSWQnLCB2ZXJpZnlVc2VyU2Vzc2lvbiwgY2hlY2tSZWNpcGVFeGlzdCwgZGVsZXRlUmVjaXBlKTtcclxuXHJcbi8vIGdldCByZWNpcGVzXHJcbnJvdXRlci5nZXQoJy9yZWNpcGVzJywgdmVyaWZ5VXNlclNlc3Npb24sIGdldFJlY2lwZXMpO1xyXG5cclxuLy8gZ2V0IHNpbmdsZSByZWNpcGVcclxucm91dGVyLmdldCgnL3JlY2lwZXMvOnJlY2lwZUlkJywgdmVyaWZ5VXNlclNlc3Npb24sIGNoZWNrUmVjaXBlRXhpc3QsIGdldFJlY2lwZSk7XHJcblxyXG4vLyBwb3N0IHJldmlldyBmb3IgYSByZWNpcGUgXHJcbnJvdXRlci5wb3N0KCcvcmVjaXBlcy86cmVjaXBlSWQvcmV2aWV3JywgdmVyaWZ5VXNlclNlc3Npb24sIGNoZWNrUmVjaXBlRXhpc3QsIHBvc3RSZXZpZXcpO1xyXG5cclxuLy8gZ2V0IHJldmlld3Mgb2YgYSByZWNpcGU7XHJcbnJvdXRlci5nZXQoJy9yZWNpcGVzLzpyZWNpcGVJZC9yZXZpZXdzJywgdmVyaWZ5VXNlclNlc3Npb24sIGNoZWNrUmVjaXBlRXhpc3QsIGdldFJldmlld3MpO1xyXG5cclxuLy8gZ2V0IGFsbCBmYXZvdXJpdGVzXHJcbnJvdXRlci5nZXQoJy91c2Vycy86dXNlcklkL2Zhdm9yaXRlcycsIHZlcmlmeVVzZXJTZXNzaW9uLCBjaGVja1VzZXJFeGlzdCwgZ2V0VXNlckZhdm9yaXRlcyk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvdXNlcnMvOnVzZXJJZC9yZWNpcGVzJywgdmVyaWZ5VXNlclNlc3Npb24sIGNoZWNrVXNlckV4aXN0LCBnZXRVc2VyUmVjaXBlcyk7XHJcblxyXG4vLyBmYXZvdXJpdGUgYSByZWNpcGVcclxucm91dGVyLnBvc3QoJy9yZWNpcGVzLzpyZWNpcGVJZC9mYXZvcml0ZScsIHZlcmlmeVVzZXJTZXNzaW9uLCBjaGVja1JlY2lwZUV4aXN0LCBmYXZvcml0ZVJlY2lwZSk7XHJcblxyXG4vLyB1cHZvdGUgb3IgZG93bnZvdGUgXHJcbnJvdXRlci5wb3N0KCcvcmVjaXBlcy86cmVjaXBlSWQvdm90ZS06dm90ZVR5cGUnLCB2ZXJpZnlVc2VyU2Vzc2lvbiwgY2hlY2tSZWNpcGVFeGlzdCwgdm90ZVJlY2lwZSwgY291bnRWb3RlICk7XHJcblxyXG4vLyBnZXQgcmVjaXBlcyB3aXRoIHRoZSBtb3N0IHVwdm90ZXMgXHJcbi8vIHJvdXRlci5nZXQoJy9yZWNpcGVzP3NvcnQ9dXB2b3RlcyZvcmRlcj1hc2NlbmRpbmcnLCB2ZXJpZnlVc2VyU2Vzc2lvbik7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyAiXX0=